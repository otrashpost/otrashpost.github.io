<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>‚úÖÔ∏èVERIFICAR‚úÖÔ∏è</title>
<style>
    #progress-container {
        margin-top: 20px;
    }
    .intbox {
        border: 2px solid #007bff;
        border-radius: 8px;
        padding: 15px;
        background-color: #f8f9fa;
        box-shadow: 0 0 10px rgba(0,0,0,0.1);
        margin-top: 20px;
    }
    #progress-bar {
        width: 100%;
        height: 20px;
        margin-top: 10px;
    }
    #countdown {
        margin-top: 10px;
        font-weight: bold;
    }
    #results-container {
        max-height: 400px;
        overflow-y: auto;
    }
</style>
<script>
let totalLinks = 10000;
let linksChecked = 0;

async function verificarLinks() {
    const baseURL = 'https://stream.ads.ottera.tv/playlist.m3u8?network_id={num1}';
    const maxNum = totalLinks;
    const resultsContainer = document.getElementById('results');
    const progressBar = document.getElementById('progress-bar');
    const countdown = document.getElementById('countdown');

    resultsContainer.innerHTML = ''; // Limpa os resultados anteriores
    linksChecked = 0;
    
    // Atualiza a contagem inicial
    countdown.textContent = `Faltam verificar: ${maxNum}`;
    progressBar.value = 0;
    progressBar.max = maxNum;
    
    // Array para armazenar URLs online
    const onlineLinks = [];
    
    // Verificar todos os links
    for (let i = 1; i <= maxNum; i++) {
        const url = baseURL
            .replace('{num1}', pad(i, 3)) // Substitui o primeiro n√∫mero
        // Adiciona a URL ao array de links online
        onlineLinks.push(verificarLink(url));
    }

    // Aguarda que todas as verifica√ß√µes sejam conclu√≠das
    const results = await Promise.all(onlineLinks);
    
    // Adiciona os resultados dentro da intbox
    results.forEach(result => {
        adicionarResultado(result.url, result.status);
    });
}

async function verificarLink(url) {
    try {
        const response = await fetch(url);
        if (response.ok) {
            return { url, status: 'üü¢Online - ‚úÖÔ∏è' };
        } else {
            return { url, status: 'üî¥Off-line - üî¥' };
        }
    } catch (error) {
        return { url, status: '‚ö†Ô∏èN√ÉO EXISTE‚ö†Ô∏è' };
    } finally {
        // Atualiza a contagem e o progresso ap√≥s cada verifica√ß√£o
        linksChecked++;
        updateProgress();
    }
}

function adicionarResultado(url, status) {
    const resultsContainer = document.getElementById('results');
    const resultElement = document.createElement('div');
    resultElement.textContent = `${url}: ${status}`;
    resultsContainer.appendChild(resultElement);
}

function updateProgress() {
    const progressBar = document.getElementById('progress-bar');
    const countdown = document.getElementById('countdown');
    
    progressBar.value = linksChecked;
    countdown.textContent = `Faltam verificar: ${totalLinks - linksChecked}`;
}

function pad(num, size) {
    let s = num + "";
    while (s.length < size) s = "0" + s;
    return s;
}
</script>
</head>
<body>
<h1>‚úÖÔ∏è Verificar ‚úÖÔ∏è</h1>
<button onclick="verificarLinks()">VER PR√ìXIMO</button>

<div id="progress-container">
    <progress id="progress-bar" value="0" max="10000"></progress>
    <div id="countdown">Faltam verificar: 10000</div>
</div>

<div class="intbox">
    <h2>Resultados</h2>
    <div id="results-container" class="intbox-content"></div>
</div>
</body>
</html>
